# 大疆A板电控框架
## 简介
基于 ***DJI A Board*** 搭建的电控框架库，包含 `Bsp`、`Module`、`App`层

用户基本无需更改App层以下的任何代码，即可搭建自己的逻辑框架 

***本架构仍在持续更新中！！！请积极 <u>提 ISSUE</u> 和 <u>拉取最新代码</u>***

## 设计原则
1. 应该保持Bsp - Module(Mod) - System(Sys) - Application(App)四层架构
2. 应明确用户 可以自定义的代码范围 和 不可以更改的代码范围
3. 固有代码应保持稳定，同时积极修复bug和添加新功能
4. 代码风格保持一致，同时高度封装和模块化

## 层级
### Bsp层 （Libs文件夹）
当前内含有：
```
    bsp_can
    bsp_dwt
    bsp_uart
    std_cpp             （C与Cpp的接口文件）
    std_math            （自定义的常用数学库，比如向量运算）
    pids                （自定义的PID控制器）
```

### Mod层
pass

### Sys层
本层级主要包含通用的机器人系统功能，<u>不应该被用户自定义更改</u>  
#### 机器人系统
1. ***注册***  
所有的模块在初始化时，都应该在机器人系统中 **完成注册**  
考虑到各层级 **单向调用** 的原则，代码编写时，不应在模块初始化Init中自动注册  
而是应该在机器人系统的初始化时，手动向其中上报已实例化的模块
2. ***监控***  
机器人系统会实时监控所有 `已注册的模块` 的在线状态，如果可以，会将其持续上报给上位机进行存档。  
注册时，可以给模块设定 **紧急度** ，以便在模块掉线时，机器人系统可以根据紧急度进行相应的处理。

3. ***调度***  
机器人系统中内含了 `状态机核心`。在系统初始化时，状态机就会初始化。  
因此，系统也会实时监控状态机的运行情况，并一并发送给上位机存档。

4. ******